= DDEX

DDEX metadata serialization

<b>DO NOT USE, WORK IN PROGRESS</b>

=== Overview

 require "ddex/ern"

 message = DDEX::ERN.read("path/to/metadata.xml")
 p message.update_indicator
 message.resources.each do |resource|
   p resource.title
   p resource.details.size
 end

 include DDEX::ERN::V341   # v3.4.1
 message = NewReleaseMessage.new(hash)
 record  = SoundRecording.new
 record.language = "en-US"
 # ...

 image = Image.new
 image.type = "FrontCoverImage"
 # ...

 message.resources << image
 message.resources << record
 xml = DDEX::ERN.write(message)

 details = TechnicalSoundRecordingDetails.new(hash)
 p details.to_hash
 puts details.to_xml

Currently only the music portion of Electronic Release Notification Message (ERN[M]) is supported -for now!

==== How this differs from the spec

* <code>ern:PriceInformation/@PriceType</code> has been renamed to <code>@Type</code> to avoid conflicting with the element of the same (ERN v3.6)


==== ERN version and schema

  DDEX::ERN.version = "3.5.1"

A version must have a configuration that describes the important XML attributes. These can be added/modified as necessary:

  cfg = DDEX::ERN.config[ DDEX::ERN.version ]
  p cfg[:namespace]
  p cfg[:schema_location]
  p cfg[:message_schema_location_id]

  DDEX::ERN.config["3.2"][:schema_location] = "somethang_custom"

=== TODO

Many things... but: ROXML.from_xml does not check the root element's name. Need to add something like:
  
  raise "unknown element #{xml.name}" unless xml.name == tag_name